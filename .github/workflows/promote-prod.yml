name: promote-prod

on:
  workflow_dispatch:
    inputs:
      source_env:
        description: "Promote from (stg recommended)"
        required: true
        default: "stg"
        type: choice
        options:
          - stg

permissions:
  contents: read

concurrency:
  group: promote-prod
  cancel-in-progress: false

jobs:
  promote:
    uses: ./.github/workflows/_promote-env.yml
    with:
      source_env: ${{ inputs.source_env }}
      target_env: prod
    secrets:
      gitops_token: ${{ secrets.GITOPS_TOKEN }}
